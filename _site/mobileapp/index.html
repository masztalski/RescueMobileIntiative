
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mobile app - Rescue Mobile</title>
    <link rel="stylesheet" href="/RescueMobileIntiative/assets/css/app.css">
    <link rel="shortcut icon" type="image/png"
           href="/RescueMobileIntiative/favicon.png" 
    />
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Mobile app | Rescue Mobile</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Mobile app" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The demo site for Bulma Clean Theme, made for Jekyll and GitHub pages websites" />
<meta property="og:description" content="The demo site for Bulma Clean Theme, made for Jekyll and GitHub pages websites" />
<link rel="canonical" href="http://localhost:4000/RescueMobileIntiative/mobileapp/" />
<meta property="og:url" content="http://localhost:4000/RescueMobileIntiative/mobileapp/" />
<meta property="og:site_name" content="Rescue Mobile" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"Mobile app","url":"http://localhost:4000/RescueMobileIntiative/mobileapp/","description":"The demo site for Bulma Clean Theme, made for Jekyll and GitHub pages websites","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- head scripts --></head>

  <body>
    
<nav class="navbar is-primary" >
    <div class="container">
        <div class="navbar-brand">
            <a href="/RescueMobileIntiative/" class="navbar-item">
                Rescue Mobile
            </a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu">
            <div class="navbar-start">
                <a href="/RescueMobileIntiative/" class="navbar-item ">Home</a>
                
                
                    
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="/RescueMobileIntiative/#" class="navbar-link ">App architecutre</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/RescueMobileIntiative/database/" class="navbar-item ">Database</a>
                            
                            <a href="/RescueMobileIntiative/cloudfunc/" class="navbar-item ">Cloud functions</a>
                            
                            <a href="/RescueMobileIntiative/mobileapp/" class="navbar-item is-active">Mobile app</a>
                            
                        </div>
                    </div>
                    
                
                    
                    <a href="/RescueMobileIntiative/setupapp/" class="navbar-item ">Get Started</a>
                    
                
                    
                    <a href="/RescueMobileIntiative/showcase/" class="navbar-item ">Showcase</a>
                    
                
                    
                    <a href="/RescueMobileIntiative/products/" class="navbar-item ">About us</a>
                    
                
                
            </div>

            <div class="navbar-end">
                
            </div>

        </div>
    </div>
</nav>

    
        <section class="hero  is-medium  is-bold is-primary" >
    <div class="hero-body ">
        <div class="container">
            <p class="title is-2">Mobile app</p>
            <p class="subtitle is-3">Descryption of mobile app</p>
            
        </div>
    </div>
</section>
    
    


    <section class="section">
        <div class="container">
            <div class="columns">
                
                <div class="column is-12">
                    
                    
                    
                    
<div class="content">
    <h1 id="authorization">Authorization</h1>

<p>App uses Firebase Authentication by e-mail to authenticate users. By default login is required only on first install of app</p>

<h1 id="communication-with-firebase">Communication with Firebase</h1>

<p>App uses Firestore as its database. No data is saved explicity on device. Most of communication with Firestore is handled by Firestore library. <br />
This means write into database and read from it happens with directly calls to Firestore collections and documents. <br />
Only few events (like creating user answer) happens by API handled by cloud functions due to necessary to determine if this is update or creating new instance</p>

<h1 id="architecture">Architecture</h1>

<p>App is written with Flutter. We decided to use <strong>BLoC pattern</strong> and some elements from <em>Clean Architecture</em> : repositories classes, model classes, “controllers” for views as Blocs, assets paths stored in separate class, translation keys stored in separate class, styles and colors also stored in separate class. <br />
This approach tries to mimic known from Android development styles.xml, colors.xml etc. to ease working with app.\</p>

<p>App uses localization feature storing all text literals in json files in <em>lang</em> folder</p>

<h1 id="flavors">Flavors</h1>

<p>App uses flavors to create 3 different environments. We achieve it using gradle productFlavors and iOS schemas connected with Flutter flavor feature. <br />
Every feature has its own <strong>main_env.dart</strong> file to save in config.dart selected flavor. Based on it app then selects valid URL for backend.<br />
<br />
This approach requires specif way of running and building app:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>flutter build --flavor=development, --target lib/main_env.dart
</code></pre></div></div>
<p>For running app from Android Studio you can just define your Run Configuration. Open Run/Debug Configuration window and type following settings for Dev Environment:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Dart entrypoint: full_path\lib\main_dev.dart
Additional arguments: --flavor=development
Build flavor: development
</code></pre></div></div>
<p>It works for Android and iOS runs.</p>

<h1 id="configuration-files">Configuration files</h1>

<p>As app is open-source all files containing our API keys and configurations are encrypted as *.enc files. Those files are decrypted during Travis build for our private distributions. If you want build app on your own and give it a try - follow GetStarted to create your own Firebase environment</p>

<h1 id="push-notifications">Push notifications</h1>

<p>App is using FCM with cloud functions to send users push notifications in response to certain events. We are using for this purpose
<a href="https://pub.dev/packages/firebase_messaging">https://pub.dev/packages/firebase_messaging</a> library. For cases when app is in foreground we are using local notifications to handle incoming push payload.</p>

<h2 id="app-handles-following-notifications">App handles following notifications:</h2>

<ul>
  <li>Action with alarm
Coordinator (user with admin role) creates action with option alarm enabled. Then all users will receive notification about new action. After selection of notification user is brought into declaration of availability screen.</li>
  <li>Change of coordinator
When coordinator(creator) of action after its creation declares that he cannot participate in action and choose another coordinator. Chosen coordinator will receive notification that he was chosen to lead action. After selection of notification user is brought into declaration of availability screen.</li>
  <li>Action started
Coordinator of action after its creation have decided to begin action with gathered users. After he chosen option “Begin organisation” from action details screen options and then assigned users to vehicles he tap “Action start” button document in <em>assignment</em> collection is created and notification to users declared as <strong>Positive</strong> for this action receives notification about it. <br />
After selection of notification user is brought to summary screen with info about his assignments.</li>
  <li>Action cancelled
Coordinator of action after its creation decides to choose option “Cancel action”. Everybody who declares <strong>any</strong> answer to this action will receive notification.</li>
</ul>

<h2 id="local-notifications">Local notifications</h2>

<p>This notifications are handled only locally without server</p>
<ul>
  <li>Reminder for coordinator for action with field “deadline” filled (action with alarm enabled) will receive at this time notification that decision time passed and he should start assigning people and start action</li>
  <li>When user selects option “Ask later” in declarion screen he will receive reminder about decision required</li>
</ul>

</div>
                </div>
                
            </div>
        </div>
    </section>
    
        <footer class="footer">
    <div class="container">
        
        

        <div class="content is-small has-text-centered">
            <p class="">Theme built by <a href="https://www.csrhymes.com">C.S. Rhymes</a></p>
        </div>
    </div>
</footer>

    
    <script src="/RescueMobileIntiative/assets/js/app.js" type="text/javascript"></script><!-- footer scripts --></body>
</html>

